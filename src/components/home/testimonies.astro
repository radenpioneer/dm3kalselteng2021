---
const testimonies = Astro.fetchContent('$/pages/katamereka/*.md').sort((a, b) => 0.5 - Math.random()).slice(0,4)
---

<section id="testimonies">
    <h1><a href="/katamereka">Apa Kata Mereka</a></h1>
    <div class="container">
    {testimonies.map(test => (
        <a class="box" href={test.url}>
        <article>
            <img src={`${test.image}?nf_resize=fit&w=150&h=150`} width="150" height="150" alt="" loading="lazy" decoding="async">
            <h2>{test.title}</h2>
            <p class="subtitle">{test.subtitle}</p>
            <p class="excerpt">{test.astro.source}</p>
        </article>
        </a>
    ))}
    </div>
</section>

<style lang="scss">
#testimonies{
    @apply flex flex-col items-center gap-8;
    @apply bg-green-600 p-4 lg:p-16;
    > h1 {
        @apply text-4xl lg:text-6xl font-extrabold text-white text-center my-6 lg:mt-16 lg:mb-8;
    }
}

.container {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4;
}

.box {
    @apply aspect-w-3 aspect-h-4;
    article {
        @apply p-4 lg:p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all;
        @apply flex flex-col items-center gap-2;
        @apply bg-white border-4 border-white hover:border-green-100;
        img {
            @apply rounded-full;
        }
        h2 {
            @apply text-3xl font-extrabold text-center;
        }
        .subtitle {
            @apply text-lg font-bold text-center;
        }
        .excerpt {
            @apply text-lg line-clamp-5 text-center italic;
        }
    }
}
</style>